// This file is generated by the create-files script in ../utils.
// Day 22 part 1
// https://adventofcode.com/2021/day/22
// input: day22/input.txt

import Cuboid from './Cuboid.ts';
import Point from './Point.ts';

const d22p1Input = (await Deno.readTextFile('day22/input.txt'))
  .split('\n')
  .filter((l) => !!l);

const gridMap = new Map<string, boolean>();
const cuboids = d22p1Input
  .map((l) => new Cuboid(l))
  .filter((c) => c.bounds.every((b) => Math.abs(b) <= 50));

cuboids.forEach((c) => {
  [...c]
    .map(([x, y, z]) => Point.encode(x, y, z))
    .forEach((p) => {
      gridMap.set(p, c.state);
    });
});

const cubesInOnState = [...gridMap.entries()].filter(
  ([, state]) => state
).length;

console.log('\n');
console.log(
  `After initialization, ${cubesInOnState} cubes are in the on state.`
);
